<!DOCTYPE html>
<html lang="id">

<head>
  <!-- basic -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- mobile metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#ff5733">

  <!-- site metas -->
  <title>WEB TEMPAT SAMPAH</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">

  <link rel="manifest" href="/manifest.json">
  <!-- fevicon -->
  <link rel="icon" href="images/fevicon.png" type="image/gif" />
  <!-- bootstrap css -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- style css -->
  <link rel="stylesheet" href="css/style.css">
  <!-- Responsive-->
  <link rel="stylesheet" href="css/responsive.css">
  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
  <!-- Tweaks for older IEs-->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
    media="screen">
  <!-- AOS CSS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>

<body class="main-layout">
  <!-- Loader -->
  <div class="loader_bg">
    <div class="loader"><img src="images/loading.gif" alt="#" /></div>
  </div>
  <!-- End Loader -->

  <!-- Main Content -->
  <main class="main-content">
    <!-- Header -->
    <header>
      <!-- Header Inner -->
      <div class="header-top">
        <div class="header">
          <div class="container-fluid">
            <div class="row">
              <!-- Logo Section -->
              <div class="col-xl-2 col-lg-4 col-md-4 col-sm-3 col logo_section">
                <div class="full">
                  <div class="center-desk">
                    <div class="logo">
                      <a href="index.html"><img src="images/icon.png" alt="Tong Sampah Pintar" width="50px"
                          height="50px" /></a>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Menu Section -->
              <div class="col-xl-10 col-lg-8 col-md-8 col-sm-9">
                <div class="menu-area">
                  <div class="limit-box">
                    <nav class="main-menu">
                      <ul class="menu-area-main">
                        <li class="active"><a href="index.html">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#features">Fitur & Teknologi</a></li>
                        <li><a href="#contact">Contact Us</a></li>
                      </ul>
                    </nav>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div> <!-- End Header Inner -->
      </div>

      <!-- Slider Section -->
      <section class="slider_section">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
          <div class="carousel-inner">
            <!-- Slide 1 -->
            <div class="carousel-item active" data-aos="fade-up">
              <div class="container-fluid padding_dd">
                <div class="carousel-caption">
                  <div class="row">
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                      <div class="text-bg">
                        <span>Selamat Datang di</span>
                        <h1>Project Tong Sampah Otomatis</h1>
                        <p>Tong Sampah Otomatis adalah solusi inovatif dalam pengelolaan sampah yang memanfaatkan
                          teknologi
                          untuk meningkatkan efisiensi dan keberlanjutan lingkungan.</p>
                        <a href="https://wa.me/6285877614553?text=Mau%20beli%20tong%20sampah%20otomatisnya%20mas
/" data-aos="fade-right">Beli Sekarang</a>
                        <a href="#features" data-aos="fade-left">Fitur</a>
                      </div>
                    </div>
                    <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                      <div class="images_box" data-aos="zoom-in">
                        <img src="images/gambar-sampah1.jpg" class="img-responsive" alt="Tong Sampah Pintar">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Tambahkan slide tambahan jika diperlukan -->
          </div>
        </div>
      </section>
      <!-- End Slider Section -->
    </header>
    <!-- End Header -->

    <!-- About Us -->
    <div id="about" class="about" data-aos="fade-up">
      <div class="container-fluid">
        <div class="row">
          <!-- About Text -->
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
            <div class="about-box">
              <h2>Tentang Kami</h2>
              <p>Project Tong Sampah Pintar adalah inisiatif untuk meningkatkan pengelolaan sampah di kota-kota dengan
                menggunakan teknologi canggih. Kami bertujuan untuk menciptakan lingkungan yang lebih bersih dan sehat
                melalui penggunaan tong sampah yang terintegrasi dengan sensor.</p>
              <a href="#" data-aos="fade-right">Baca lebih lanjut</a>
            </div>
          </div>
          <!-- About Image -->
          <div class="about-img col-xl-6 col-lg-6 col-md-6 col-sm-12 padding_rl" data-aos="zoom-in">
            <div class="about-box_img">
              <figure><img src="images/gambar-sampah2.jpg" class="img-responsive" alt="Tong Sampah Pintar"></figure>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End About Us -->

    <!-- Features & Teknologi -->
    <div id="features" class="features section-padding" data-aos="fade-up">
      <div class="container">
        <div class="row">
          <!-- Section Title -->
          <div class="col-md-12">
            <div class="titlepage text-center">
              <h2>Fitur & <strong class="llow">Teknologi</strong></h2>
            </div>
          </div>
        </div>
        <div class="row">
          <!-- Fitur 1 -->
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-4" data-aos="fade-up" data-aos-delay="100">
            <div class="card feature-card h-100 text-center">
              <div class="card-body">
                <h5 class="card-title">Penutup Otomatis</h5>
                <p class="card-text">Penutup tempat sampah yang berfungsi otomatis membuka dan menutup tanpa sentuhan.
                </p>
              </div>
            </div>
          </div>
          <!-- Fitur 2 -->
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-4" data-aos="fade-up" data-aos-delay="200">
            <div class="card feature-card h-100 text-center">
              <div class="card-body">
                <h5 class="card-title">Sensor Panas Canggih</h5>
                <p class="card-text">Deteksi kepenuhan sampah secara otomatis.</p>
              </div>
            </div>
          </div>
          <!-- Fitur 3 -->
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-4" data-aos="fade-up" data-aos-delay="300">
            <div class="card feature-card h-100 text-center">
              <div class="card-body">
                <h5 class="card-title">Desain Ergonomis</h5>
                <p class="card-text">Memudahkan penggunaan oleh masyarakat dengan desain yang ramah pengguna.</p>
              </div>
            </div>
          </div>
          <!-- Fitur 4 -->
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-4" data-aos="fade-up" data-aos-delay="400">
            <div class="card feature-card h-100 text-center">
              <div class="card-body">
                <h5 class="card-title">Meningkatkan Efisiensi Kebersihan</h5>
                <p class="card-text">Meningkatkan efisiensi pengelolaan sampah dan menjaga kebersihan lingkungan sekitar
                  dengan sistem otomatis.</p>
              </div>
            </div>
          </div>
          <!-- Fitur 5 -->
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-4" data-aos="fade-up" data-aos-delay="500">
            <div class="card feature-card h-100 text-center">
              <div class="card-body">
                <h5 class="card-title">Material Tahan Lama</h5>
                <p class="card-text">Terbuat dari bahan berkualitas tinggi yang tahan lama dan tahan terhadap korosi</p>
              </div>
            </div>
          </div>
          <!-- Fitur 6 -->
          <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 mb-4" data-aos="fade-up" data-aos-delay="600">
            <div class="card feature-card h-100 text-center">
              <div class="card-body">
                <h5 class="card-title">Kemudahan Instalasi</h5>
                <p class="card-text">Desain yang user-friendly memudahkan proses instalasi</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Features & Teknologi -->

    <!-- Contact Section -->
    <div id="contact" class="contact" data-aos="fade-up">
      <div class="container">
        <div class="row">
          <!-- Section Title -->
          <div class="col-md-12">
            <div class="titlepage">
              <h2>Contact <strong class="llow">us</strong></h2>
            </div>
          </div>
        </div>
        <div class="white_color">
          <!-- Form Contact -->
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
            <form class="contact_bg" data-aos="fade-right">
              <div class="row">
                <div class="col-md-12">
                  <div class="col-md-12 input-nama">
                    <input class="contactus" placeholder="Your Name" type="text" name="your_name" required>
                  </div>
                  <div class="col-md-12 input-pesan">
                    <textarea class="textarea" placeholder="Message" name="message" required></textarea>
                  </div>
                  <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                    <button class="send" type="submit" name="button" data-aos="fade-left">Send</button>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <!-- Gambar Contact -->
          <div class="contact-img col-xl-6 col-lg-6 col-md-6 col-sm-12" data-aos="zoom-in">
            <img src="images/foto.jpg" alt="">
          </div>
        </div>
      </div>
    </div>
    <!-- End Contact -->
  </main>
  <!-- End Main Content -->

  <!-- Footer -->
  <footer>
    <div class="footer">
      <div class="container">
        <div class="row">
          <!-- Kolom Alamat -->
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
            <div class="address">
              <h3>Alamat</h3>
              <ul class="loca">
                <li>
                  <i class="fa fa-map-marker" aria-hidden="true"></i> M. Bagas Firmansyah
                </li>
                <li>
                  <i class="fa fa-phone" aria-hidden="true"></i> 085742572129
                </li>
                <li>
                  <i class="fa fa-envelope" aria-hidden="true"></i> bagas@gmail.com
                </li>
              </ul>
            </div>
          </div>
          <!-- Kolom Link Sosial -->
          <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
            <div class="social-links">
              <h3>Ikuti Kami</h3>
              <ul class="social_link">
                <li><a href="https://twitter.com/tongsampahpintar" target="_blank"><i class="fa fa-twitter"></i>
                    Twitter</a></li>
                <li><a href="https://facebook.com/tongsampahpintar" target="_blank"><i class="fa fa-facebook"></i>
                    Facebook</a></li>
                <li><a href="https://instagram.com/tongsampahpintar" target="_blank"><i class="fa fa-instagram"></i>
                    Instagram</a></li>
                <li><a href="https://linkedin.com/company/tongsampahpintar" target="_blank"><i
                      class="fa fa-linkedin"></i> LinkedIn</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Hak Cipta -->
      <div class="copyright">
        <div class="container">
          <p>&copy; 2025 Design by Bagas. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>
  <!-- End Footer -->

  <!-- Javascript Files -->
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/jquery-3.0.0.min.js"></script>
  <script src="js/plugin.js"></script>
  <!-- sidebar -->
  <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="js/custom.js"></script>
  <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
  <!-- AOS JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>
    AOS.init({
      duration: 1000, // Durasi animasi dalam milidetik
      once: false, // Animasi hanya terjadi sekali saat scroll pertama kali
    });
  </script>
  <script>
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker
          .register("/js/sw.js")
          .then((registration) => {
            console.log("Service Worker terdaftar dengan sukses:", registration.scope);
          })
          .catch((error) => {
            console.log("Pendaftaran Service Worker gagal:", error);
          });
      });
    }
  </script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getMessaging, getToken, onMessage } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-messaging.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBAn4Dp5FisfcCE_Xg1YWV3MVHv14k_j7U",
      authDomain: "portfolio-4f6eb.firebaseapp.com",
      projectId: "portfolio-4f6eb",
      storageBucket: "portfolio-4f6eb.firebasestorage.app",
      messagingSenderId: "118979819413",
      appId: "1:118979819413:web:9eb6990787994b0470a89c",
      measurementId: "G-R62H9KRQ3P"
    };
    const app = initializeApp(firebaseConfig);
    const messaging = getMessaging(app);

    function showThankYouNotification() {
      const isThankYouShown = localStorage.getItem("thankYouNotificationShown");
      if (!isThankYouShown) {
        console.log("Showing thank you notification.");
        const options = {
          body: "Thank you for allowing notifications!",
          icon: "/img/icon-pwa192x192.png",
          vibrate: [200, 100, 200]
        };
        new Notification("New Message!", options);
        localStorage.setItem("thankYouNotificationShown", "true");
      } else {
        console.log("Thank you notification already shown.");
      }
    }

    const previousPermission = localStorage.getItem("notificationPermission");
    if (previousPermission !== Notification.permission) {
      if (Notification.permission === "granted") {
        localStorage.removeItem("thankYouNotificationShown");
      }
      localStorage.setItem("notificationPermission", Notification.permission);
    }
    if (Notification.permission === "default") {
      console.log("Requesting notification permission...");
      Notification.requestPermission().then((permission) => {
        if (permission === "granted") {
          console.log("Notification permission granted.");
          showThankYouNotification();
        } else {
          console.log("Notification permission denied.");
        }
      }).catch((error) => {
        console.error("Permission request error:", error);
      });
    } else if (Notification.permission === "granted") {
      showThankYouNotification();
    }
    getToken(messaging, {
      vapidKey: 'BNJs__kTWgr7zqkSbqdlDwgMTgbsZbMJMX3d1Zk9YXoHUIo9pYyHgke8qchCiB1cIfRoh91lExldi0cG_aVhvkM',
      serviceWorkerRegistration: await navigator.serviceWorker.ready
    })
      .then((currentToken) => {
        if (currentToken) {
          console.log("Device token:", currentToken);
        } else {
          console.log("No registration token available.");
        }
      })
      .catch((err) => {
        console.error("An error occurred while retrieving token:", err);
      });
    onMessage(messaging, (payload) => {
      console.log("FCM message received in the foreground:", payload);
      const { title, body, icon } = payload.notification;
      const options = {
        body: body,
        icon: icon || "/img/icon-pwa192x192.png",
        badge: "/img/icon-pwa192x192.png",
        vibrate: [200, 100, 200]
      };
      new Notification(title, options);
    });
  </script>

  <!-- IndexedDB dan Form Contact -->
  <script>
    let db;
    const request = indexedDB.open("messagesDB", 1);

    // Tangani error saat membuka IndexedDB
    request.onerror = function (event) {
      console.error("Database error:", event.target.errorCode);
    };

    // Ketika IndexedDB berhasil dibuka
    request.onsuccess = function (event) {
      db = event.target.result;
      console.log("Database initialized");

      const kirimButton = document.querySelector('button[name="button"]');
      if (kirimButton) {
        kirimButton.addEventListener("click", (e) => {
          e.preventDefault(); // Mencegah form submit default
          const inputNama = document.querySelector('input[name="your_name"]').value;
          const inputPesan = document.querySelector('textarea[name="message"]').value;

          if (inputNama && inputPesan) {
            saveMessagesToIndexedDB(inputNama, inputPesan);
          } else {
            alert("Nama dan Pesan harus diisi!");
          }
        });
      } else {
        console.error("Tombol kirim tidak ditemukan!");
      }
    };

    // Tangani saat database di-upgrade
    request.onupgradeneeded = function (event) {
      db = event.target.result;
      const objectStore = db.createObjectStore("messages", { keyPath: "id", autoIncrement: true });
      objectStore.createIndex("nama", "nama", { unique: false });
      objectStore.createIndex("pesan", "pesan", { unique: false });
      console.log("Object Store created");
    };

    function requestNotificationPermission() {
      if (Notification.permission === "default") {
        Notification.requestPermission().then(permission => {
          if (permission === "granted") {
            console.log("Notification permission granted");
          }
        });
      }
    }

    function showNotification() {
      if (Notification.permission === "granted") {
        try {
          new Notification("Pesan Baru", {
            body: "Data berhasil disimpan di IndexedDB",
            icon: "/images/icon.png",
            vibrate: [200, 100, 200],
          });
        } catch (error) {
          console.error("Gagal menampilkan notifikasi:", error);
        }
      } else {
        console.log("Permission not granted for Notification");
      }
    }

    function saveMessagesToIndexedDB(nama, pesan) {
      const tx = db.transaction(["messages"], "readwrite");
      const objectStore = tx.objectStore("messages");

      const contactData = { nama, pesan };
      const request = objectStore.add(contactData);

      request.onsuccess = function () {
        console.log("Data berhasil disimpan");
        alert("Pesan Anda telah terkirim");
        showNotification();
      };


      request.onerror = function (event) {
        console.error("Error saat menyimpan data:", event.target.errorCode);
      };
    }

    document.addEventListener("DOMContentLoaded", () => {
      requestNotificationPermission();
    });

  </script>



</body>

</html>